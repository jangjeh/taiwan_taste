<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>대만 미식 탐험 (Taiwan Gourmet)</title>
    
    <script src="https://cdn.tailwindcss.com"></script>
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
        }
        /* 가로 스크롤 스크롤바 숨기기 */
        .no-scrollbar::-webkit-scrollbar {
            display: none;
        }
        .no-scrollbar {
            -ms-overflow-style: none;
            scrollbar-width: none;
        }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 min-h-screen flex flex-col">

    <header class="bg-white shadow-sm sticky top-0 z-50">
        <div class="max-w-5xl mx-auto px-4 pt-6 pb-4">
            <h1 class="text-2xl font-bold text-center mb-1 text-slate-900">
                <i class="fa-solid fa-bowl-food text-orange-500 mr-2"></i>대만 미식 탐험
            </h1>
            <p class="text-center text-xs text-slate-500 font-medium tracking-wide mb-6 uppercase">Taiwan Gourmet Guide</p>

            <div class="flex bg-slate-100 p-1 rounded-xl max-w-md mx-auto">
                <button onclick="setDistrict('Taipei')" id="tab-taipei" class="flex-1 py-2.5 text-sm font-bold rounded-lg transition-all duration-300 shadow-sm bg-white text-orange-600">
                    타이베이 (Taipei)
                </button>
                <button onclick="setDistrict('Beitou')" id="tab-beitou" class="flex-1 py-2.5 text-sm font-bold rounded-lg transition-all duration-300 text-slate-500 hover:bg-slate-200">
                    베이터우 (Beitou)
                </button>
            </div>
        </div>
    </header>

    <section class="max-w-5xl mx-auto px-4 mt-6 w-full space-y-4">
        <div class="relative w-full">
            <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                <i class="fa-solid fa-magnifying-glass text-slate-400"></i>
            </div>
            <input type="text" id="searchInput" placeholder="맛집 이름, 메뉴, 태그 검색..." 
                class="block w-full pl-10 pr-3 py-3 border-none rounded-xl bg-white shadow-sm focus:ring-2 focus:ring-orange-500 focus:outline-none placeholder-slate-400 text-sm transition-shadow">
        </div>

        <div class="flex space-x-2 overflow-x-auto no-scrollbar pb-2" id="categoryList">
            </div>
    </section>

    <main class="flex-grow max-w-5xl mx-auto px-4 py-6 w-full">
        <div class="mb-4 text-slate-500 text-sm font-medium flex justify-between items-center">
            <span id="resultCount">검색 중...</span>
        </div>

        <div id="restaurantGrid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </div>

        <div id="emptyState" class="hidden flex-col items-center justify-center py-20 text-center">
            <div class="w-16 h-16 bg-slate-200 rounded-full flex items-center justify-center mb-4 text-slate-400 text-2xl">
                <i class="fa-solid fa-circle-exclamation"></i>
            </div>
            <h3 class="text-lg font-bold text-slate-700">검색 결과가 없습니다</h3>
            <p class="text-slate-500 text-sm mt-1">다른 검색어니 카테고리를 선택해보세요.</p>
        </div>
    </main>

    <footer class="bg-white border-t py-6 text-center text-slate-400 text-xs mt-auto">
        <p>© 2025 Taiwan Gourmet Explorer. Vanilla JS Project.</p>
    </footer>

    <script>
        // ==========================================
        // 1. DATA SOURCE (Merged from prompt)
        // ==========================================
        const restaurantData = [
            // 기존 보유 데이터
            {
                "id": "tp_01",
                "name_kr": "하오지쉐이자오 (하오지 물만두)",
                "name_en": "Hao Ji Shui Jiao",
                "name_cn": "豪季水餃專賣店",
                "category": "Casual Dining",
                "district": "Zhongzheng District",
                "sub_area": "Taipei Main Station",
                "price_level": 1,
                "rating": 4.1,
                "description": "탱글탱글한 새우 물만두가 유명한 현지인 맛집.",
                "tags": ["물만두", "새우만두", "현지인맛집"]
            },
            {
                "id": "tp_02",
                "name_kr": "장기우육면 (장기궈티에)",
                "name_en": "Zhang Ji Potsticker Beef Noodle",
                "name_cn": "張記鍋貼牛肉麵",
                "category": "Casual Dining",
                "district": "Zhongzheng District",
                "sub_area": "Ximending",
                "price_level": 1,
                "rating": 4.3,
                "description": "좁은 골목 숨은 노포. 이연복 쉐프가 극찬한 군만두와 우육면.",
                "tags": ["이연복", "군만두", "노포"]
            },
            {
                "id": "tp_03",
                "name_kr": "푸항또우장",
                "name_en": "Fuhang Soy Milk",
                "name_cn": "阜杭豆漿",
                "category": "Breakfast",
                "district": "Zhongzheng District",
                "sub_area": "Shandao Temple",
                "price_level": 1,
                "rating": 4.4,
                "description": "타이베이 최고의 조식. 미슐랭 빕구르망. 또우장과 요우티아오.",
                "tags": ["미슐랭", "아침식사", "웨이팅"]
            },
            {
                "id": "tp_04",
                "name_kr": "진따 루로우판 (금대루육밥)",
                "name_en": "Jin Da Braised Pork Rice",
                "name_cn": "今大魯肉飯",
                "category": "Street Food",
                "district": "Sanchong District",
                "sub_area": "Sanchong",
                "price_level": 1,
                "rating": 4.5,
                "description": "현지인이 줄 서서 먹는 루로우판(돼지고기 덮밥) 찐맛집.",
                "tags": ["루로우판", "로컬맛집", "가성비"]
            },
            {
                "id": "tp_05",
                "name_kr": "황지아 샹창 (황가 소시지)",
                "name_en": "Huang's Royal Sausage",
                "name_cn": "黃家香腸",
                "category": "Street Food",
                "district": "Zhongzheng District",
                "sub_area": "Guting",
                "price_level": 1,
                "rating": 4.6,
                "description": "백종원이 추천한 대만식 소시지 맛집. 마늘과 함께 먹는 것이 특징.",
                "tags": ["백종원", "소시지", "스트리트푸드"]
            },
            {
                "id": "tp_06",
                "name_kr": "라오허제 야시장",
                "name_en": "Raohe Street Night Market",
                "name_cn": "饒河街觀光夜市",
                "category": "Street Food",
                "district": "Songshan District",
                "sub_area": "Songshan Station",
                "price_level": 1,
                "rating": 4.3,
                "description": "화려한 입구와 후추빵(후자오빙)이 유명한 타이베이 대표 야시장.",
                "tags": ["야시장", "후추빵", "먹거리"]
            },
            {
                "id": "tp_07",
                "name_kr": "위안팡 꽈바오",
                "name_en": "Yuan Fang Gua Bao",
                "name_cn": "源芳刈包",
                "category": "Street Food",
                "district": "Wanhua District",
                "sub_area": "Huaxi Street",
                "price_level": 1,
                "rating": 4.2,
                "description": "미슐랭 빕구르망 선정. 대만식 햄버거 꽈바오 전문점.",
                "tags": ["미슐랭", "꽈바오", "간식"]
            },
            {
                "id": "tp_08",
                "name_kr": "스린 야시장",
                "name_en": "Shilin Night Market",
                "name_cn": "士林夜市",
                "category": "Street Food",
                "district": "Shilin District",
                "sub_area": "Jiantan Station",
                "price_level": 1,
                "rating": 3.9,
                "description": "타이베이 최대 규모의 야시장. 지파이, 왕치즈감자 등 먹거리 천국.",
                "tags": ["야시장", "랜드마크", "쇼핑"]
            },
            {
                "id": "tp_09",
                "name_kr": "하오다 지파이 (스린점)",
                "name_en": "Hot-Star Large Fried Chicken",
                "name_cn": "士林豪大大雞排",
                "category": "Street Food",
                "district": "Shilin District",
                "sub_area": "Shilin Night Market",
                "price_level": 1,
                "rating": 3.5,
                "description": "얼굴만한 크기의 대형 닭튀김, 지파이의 원조.",
                "tags": ["지파이", "치킨", "스린야시장"]
            },
            {
                "id": "tp_10",
                "name_kr": "닝샤 야시장",
                "name_en": "Ningxia Night Market",
                "name_cn": "寧夏夜市",
                "category": "Street Food",
                "district": "Datong District",
                "sub_area": "Zhongshan Station",
                "price_level": 1,
                "rating": 4.2,
                "description": "현지인들이 선호하는 미식 위주의 알짜배기 야시장.",
                "tags": ["야시장", "현지인", "굴전"]
            },
            {
                "id": "tp_11",
                "name_kr": "화시지예 야시장",
                "name_en": "Huaxi Street Night Market",
                "name_cn": "華西街觀光夜市",
                "category": "Street Food",
                "district": "Wanhua District",
                "sub_area": "Longshan Temple",
                "price_level": 1,
                "rating": 3.8,
                "description": "용산사 근처의 전통 야시장. 보양식과 마사지샵이 많음.",
                "tags": ["야시장", "용산사", "전통"]
            },
            {
                "id": "tp_12",
                "name_kr": "라오산동 우육면",
                "name_en": "Lao Shandong Homemade Noodles",
                "name_cn": "老山東牛肉麵",
                "category": "Casual Dining",
                "district": "Wanhua District",
                "sub_area": "Ximending",
                "price_level": 1,
                "rating": 4.1,
                "description": "미슐랭 빕구르망. 넓은 칼국수 면발이 특징인 우육면 노포.",
                "tags": ["미슐랭", "우육면", "자가제면"]
            },
            {
                "id": "tp_13",
                "name_kr": "준사부 우육면",
                "name_en": "Master Jim Beef Noodle",
                "name_cn": "竣師父牛肉麵",
                "category": "Casual Dining",
                "district": "Da'an District",
                "sub_area": "East District",
                "price_level": 2,
                "rating": 4.3,
                "description": "마라 향이 나는 독특하고 진한 국물의 우육면.",
                "tags": ["우육면", "마라", "트렌디"]
            },
            {
                "id": "tp_14",
                "name_kr": "아종면선",
                "name_en": "Ay-Chung Flour-Rice Noodle",
                "name_cn": "阿宗麵線",
                "category": "Street Food",
                "district": "Wanhua District",
                "sub_area": "Ximending",
                "price_level": 1,
                "rating": 4.1,
                "description": "서서 먹는 곱창 국수. 가쓰오부시 육수의 감칠맛이 일품.",
                "tags": ["곱창국수", "필수코스", "시먼딩"]
            },
            {
                "id": "tp_15",
                "name_kr": "도소월 (종샤오점)",
                "name_en": "Du Hsiao Yueh Zhongxiao",
                "name_cn": "度小月擔仔麵 台北忠孝店",
                "category": "Casual Dining",
                "district": "Da'an District",
                "sub_area": "Zhongxiao Dunhua",
                "price_level": 2,
                "rating": 4.0,
                "description": "타이난에서 시작된 100년 전통의 단짜미엔(담자면) 전문점.",
                "tags": ["단짜미엔", "전통맛집", "깔끔함"]
            },
            {
                "id": "tp_16",
                "name_kr": "신동양 양고기",
                "name_en": "Xin Dong Yang Mutton",
                "name_cn": "新東羊 羊肉料理專賣店",
                "category": "Casual Dining",
                "district": "Zhongshan District",
                "sub_area": "Longjiang Rd",
                "price_level": 2,
                "rating": 4.2,
                "description": "푸짐한 양고기 볶음과 탕을 즐길 수 있는 현지인 술집 겸 식당.",
                "tags": ["양고기", "술안주", "로컬바이브"]
            },
            {
                "id": "tp_17",
                "name_kr": "행복당 (시먼딩 플래그십)",
                "name_en": "Xing Fu Tang Flagship",
                "name_cn": "幸福堂西門町全球旗艦店",
                "category": "Cafe/Dessert",
                "district": "Wanhua District",
                "sub_area": "Ximending",
                "price_level": 1,
                "rating": 4.3,
                "description": "직접 끓인 흑설탕 타피오카 펄이 들어가는 버블티 유명 맛집.",
                "tags": ["버블티", "흑설탕", "디저트"]
            },
            {
                "id": "tp_18",
                "name_kr": "샹산 육거석 전망대",
                "name_en": "Xiangshan Six Boulders Observation Deck",
                "name_cn": "象山六巨石觀景台",
                "category": "Cafe/Dessert",
                "district": "Xinyi District",
                "sub_area": "Xiangshan",
                "price_level": 1,
                "rating": 4.6,
                "description": "타이베이 101이 가장 잘 보이는 최고의 야경 명소 (등산 필요).",
                "tags": ["전망대", "야경", "등산"]
            },
            {
                "id": "tp_19",
                "name_kr": "시먼딩 아메리칸 스트리트",
                "name_en": "American Street",
                "name_cn": "西門町美國街",
                "category": "Street Food",
                "district": "Wanhua District",
                "sub_area": "Ximending",
                "price_level": 1,
                "rating": 4.2,
                "description": "그래피티와 힙한 옷가게, 햄버거 가게가 모여 있는 젊음의 거리.",
                "tags": ["포토존", "힙플레이스", "스트리트"]
            },
            {
                "id": "tp_20",
                "name_kr": "아청구스 (아성아육)",
                "name_en": "A Cheng Goose",
                "name_cn": "阿城鵝肉",
                "category": "Casual Dining",
                "district": "Zhongshan District",
                "sub_area": "Jilin Road",
                "price_level": 2,
                "rating": 4.4,
                "description": "미슐랭 빕구르망. 부드럽고 훈연 향이 가득한 거위 고기 전문점.",
                "tags": ["미슐랭", "거위고기", "보양식"]
            },
            {
                "id": "tp_21",
                "name_kr": "허셩우 스테이크",
                "name_en": "He Sheng Wu Steak House",
                "name_cn": "人从众厚切牛排",
                "category": "Casual Dining",
                "district": "Da'an District",
                "sub_area": "East District",
                "price_level": 2,
                "rating": 4.0,
                "description": "대만식 철판 스테이크. 스프와 음료가 무한리필되는 가성비 맛집.",
                "tags": ["스테이크", "가성비", "철판요리"]
            },
            {
                "id": "tp_22",
                "name_kr": "딘타이펑 (신의 A13점)",
                "name_en": "Din Tai Fung Xinyi A13",
                "name_cn": "鼎泰豐 A13",
                "category": "Casual Dining",
                "district": "Xinyi District",
                "sub_area": "Taipei 101 Area",
                "price_level": 3,
                "rating": 4.5,
                "description": "세계적인 샤오롱바오 명가. 쾌적한 환경과 완벽한 서비스.",
                "tags": ["샤오롱바오", "필수코스", "가족여행"]
            },
            {
                "id": "tp_23",
                "name_kr": "푸딩 탕바오 (복정탕포)",
                "name_en": "Fuding Baozi",
                "name_cn": "福鼎湯包店",
                "category": "Casual Dining",
                "district": "Wenshan District",
                "sub_area": "Wanfang Hospital",
                "price_level": 1,
                "rating": 4.1,
                "description": "딘타이펑 출신 셰프가 운영하는 가성비 최고의 샤오롱바오 맛집.",
                "tags": ["가성비", "샤오롱바오", "현지인맛집"]
            },
            {
                "id": "tp_24",
                "name_kr": "푸바왕 족발",
                "name_en": "Fu Ba Wang Pork Restaurant",
                "name_cn": "富霸王豬脚",
                "category": "Casual Dining",
                "district": "Zhongshan District",
                "sub_area": "Siping Street",
                "price_level": 2,
                "rating": 4.2,
                "description": "젠슨 황(NVIDIA CEO)의 단골집. 콜라겐 가득한 족발 덮밥.",
                "tags": ["족발", "덮밥", "젠슨황"]
            },
            {
                "id": "tp_25",
                "name_kr": "진위안 파이구 (금원배골)",
                "name_en": "King Pork Wan Nian",
                "name_cn": "金園排骨",
                "category": "Casual Dining",
                "district": "Wanhua District",
                "sub_area": "Ximending",
                "price_level": 1,
                "rating": 4.1,
                "description": "바삭한 돼지갈비 튀김(파이구) 덮밥이 유명한 시먼딩 맛집.",
                "tags": ["파이구", "돼지갈비", "혼밥"]
            },
            // Beitou Data
            {
                "id": "bt_01",
                "name_kr": "문문 푸드 (월월풍)",
                "name_en": "Moon Moon Food",
                "name_cn": "月月Thai BBQ",
                "category": "Fine Dining",
                "district": "Beitou District",
                "sub_area": "Beitou",
                "price_level": 3,
                "rating": 4.3,
                "description": "모던한 분위기의 타이/대만 퓨전 요리. 뷰가 좋음.",
                "tags": ["퓨전", "분위기", "데이트"]
            },
            {
                "id": "bt_02",
                "name_kr": "티 컬러스 카페",
                "name_en": "Tea Colors",
                "name_cn": "水龜伯古早味",
                "category": "Cafe/Dessert",
                "district": "Beitou District",
                "sub_area": "Beitou Station",
                "price_level": 1,
                "rating": 4.4,
                "description": "베이터우 최고의 인기 디저트 가게. 흑당 떡 빙수가 유명.",
                "tags": ["빙수", "디저트", "웨이팅"]
            },
            {
                "id": "bt_03",
                "name_kr": "국월정 (카가야 호텔)",
                "name_en": "Ju Yue Ting (Radium Kagaya)",
                "name_cn": "掬月亭",
                "category": "Fine Dining",
                "district": "Beitou District",
                "sub_area": "Hot Spring Area",
                "price_level": 4,
                "rating": 4.5,
                "description": "일본 료칸 카가야 내부의 정통 가이세키 요리 전문점.",
                "tags": ["가이세키", "고급", "일식"]
            },
            {
                "id": "bt_04",
                "name_kr": "오가우육면",
                "name_en": "Wu Family Beef Noodle",
                "name_cn": "吳家牛肉麵",
                "category": "Casual Dining",
                "district": "Beitou District",
                "sub_area": "Beitou",
                "price_level": 1,
                "rating": 4.1,
                "description": "베이터우 3대 우육면 중 하나. 한국인 입맛에 잘 맞는 진한 국물.",
                "tags": ["우육면", "로컬", "해장"]
            },
            {
                "id": "bt_05",
                "name_kr": "하오지 물만두 (베이터우점)",
                "name_en": "Hao Ji Dumplings Beitou",
                "name_cn": "豪季水餃專賣店 北投",
                "category": "Casual Dining",
                "district": "Beitou District",
                "sub_area": "Beitou Station",
                "price_level": 1,
                "rating": 4.2,
                "description": "타이베이 시내 맛집의 베이터우 분점. 새우 물만두 추천.",
                "tags": ["물만두", "체인점", "실패없음"]
            },
            {
                "id": "bt_06",
                "name_kr": "하수멘테이 (하면정)",
                "name_en": "Hasumentei",
                "name_cn": "荷麵亭",
                "category": "Casual Dining",
                "district": "Beitou District",
                "sub_area": "Beitou Station",
                "price_level": 2,
                "rating": 4.6,
                "description": "진한 돈코츠 육수의 일본식 라멘 맛집. 하루 한정 수량 판매.",
                "tags": ["라멘", "일식", "숨은맛집"]
            },
            {
                "id": "bt_07",
                "name_kr": "수가우육면",
                "name_en": "Su Jia Beef Noodle",
                "name_cn": "粟家牛肉麵",
                "category": "Casual Dining",
                "district": "Beitou District",
                "sub_area": "Beitou",
                "price_level": 2,
                "rating": 4.2,
                "description": "다양한 부위의 소고기 토핑을 선택할 수 있는 우육면 전문점.",
                "tags": ["우육면", "토핑다양", "현지인"]
            },
            {
                "id": "bt_08",
                "name_kr": "베이터우 튀김 총좌빙",
                "name_en": "Beitou Fried Scallion Pancake",
                "name_cn": "北投炸蛋蔥油餅",
                "category": "Street Food",
                "district": "Beitou District",
                "sub_area": "Beitou Station",
                "price_level": 1,
                "rating": 4.3,
                "description": "기름에 튀기듯 구워낸 바삭하고 쫄깃한 대만식 호떡 총좌빙.",
                "tags": ["총좌빙", "간식", "길거리음식"]
            },
            // Supplementary Data 1
            {
                "id": "new_tp_01",
                "name_kr": "용허또우장대왕 (푸싱남로점)",
                "name_en": "Yong He Soy Milk King",
                "name_cn": "永和豆漿大王",
                "category": "Breakfast",
                "district": "Da'an District",
                "sub_area": "Daan Station",
                "price_level": 1,
                "rating": 4.0,
                "description": "푸항또우장의 긴 줄이 부담스러울 때 가는 24시간 조식 맛집. 짠 순두부(셴또우장) 추천.",
                "tags": ["추가데이터", "아침식사", "24시간", "또우장"]
            },
            {
                "id": "new_bt_01",
                "name_kr": "소수선원 (소육차포)",
                "name_en": "Marshal Zen Garden",
                "name_cn": "少帥禪園",
                "category": "Cafe/Dessert",
                "district": "Beitou District",
                "sub_area": "Hot Spring Area",
                "price_level": 3,
                "rating": 4.4,
                "description": "베이터우의 전경이 내려다보이는 고즈넉한 찻집. 옛 장군의 저택을 개조한 힐링 스팟.",
                "tags": ["추가데이터", "전망좋은카페", "애프터눈티", "인생샷"]
            },
            {
                "id": "new_bt_02",
                "name_kr": "펑라이 (봉래대채)",
                "name_en": "Peng Lai Traditional Taiwan Cuisine",
                "name_cn": "蓬萊台菜餐廳",
                "category": "Casual Dining",
                "district": "Beitou District",
                "sub_area": "Beitou Station",
                "price_level": 3,
                "rating": 4.3,
                "description": "베이터우에서 가장 유명한 정통 대만 요리집. 뼈 있는 갈비 튀김(파이구수)이 필수 메뉴.",
                "tags": ["추가데이터", "현지인맛집", "가족식사", "갈비튀김"]
            },
            {
                "id": "new_bt_03",
                "name_kr": "아휘백 (아후이보) 무채전",
                "name_en": "Ah Hui Bo Radish Cake",
                "name_cn": "阿輝伯蘿蔔絲餅",
                "category": "Breakfast",
                "district": "Beitou District",
                "sub_area": "Beitou Park",
                "price_level": 1,
                "rating": 4.4,
                "description": "베이터우 현지인들의 아침을 책임지는 줄 서는 가게. 갓 튀긴 무채전과 계란 후라이.",
                "tags": ["추가데이터", "아침식사", "길거리음식", "현지인"]
            },
            {
                "id": "new_bt_04",
                "name_kr": "고기차장 (가오지 티하우스)",
                "name_en": "Gao Ji Tea House",
                "name_cn": "高記茶莊",
                "category": "Cafe/Dessert",
                "district": "Beitou District",
                "sub_area": "Beitou Market",
                "price_level": 1,
                "rating": 4.5,
                "description": "베이터우 시장의 명물. 저렴하고 양 많은 봉지 홍차와 우유차. 온천 후 갈증 해소에 최고.",
                "tags": ["추가데이터", "밀크티", "베이터우시장", "가성비"]
            },
            // Supplementary Data 2
            {
                "id": "new_tp_02",
                "name_kr": "우라오 훠궈 (중산점)",
                "name_en": "Wulao Hotpot",
                "name_cn": "無老鍋",
                "category": "Casual Dining",
                "district": "Zhongshan District",
                "sub_area": "Zhongshan Station",
                "price_level": 3,
                "rating": 4.4,
                "description": "대만 여행 필수 코스인 훠궈. 마라훠궈보다 고급스럽고 크리미한 '두부 백탕'이 일품.",
                "tags": ["추가데이터", "훠궈", "예약필수", "부모님동반"]
            },
            {
                "id": "new_tp_03",
                "name_kr": "심플 카파 (화산 1914)",
                "name_en": "Simple Kaffa",
                "name_cn": "興波咖啡",
                "category": "Cafe/Dessert",
                "district": "Zhongzheng District",
                "sub_area": "Huashan 1914",
                "price_level": 2,
                "rating": 4.3,
                "description": "월드 바리스타 챔피언의 카페. 커피 애호가라면 꼭 가봐야 할 타이베이 최고의 커피 성지.",
                "tags": ["추가데이터", "커피맛집", "분위기", "화산1914"]
            },
            {
                "id": "new_tp_04",
                "name_kr": "스무시 하우스 (본관)",
                "name_en": "Smoothie House",
                "name_cn": "思慕昔",
                "category": "Cafe/Dessert",
                "district": "Da'an District",
                "sub_area": "Yongkang Street",
                "price_level": 2,
                "rating": 4.0,
                "description": "융캉제 거리의 상징적인 망고 빙수 맛집. 푸짐한 생망고와 부드러운 눈꽃 얼음.",
                "tags": ["추가데이터", "망고빙수", "융캉제", "디저트"]
            },
            {
                "id": "new_tp_05",
                "name_kr": "드래프트 랜드",
                "name_en": "Draft Land",
                "name_cn": "Draft Land",
                "category": "Pub/Bar",
                "district": "Da'an District",
                "sub_area": "Zhongxiao Dunhua",
                "price_level": 2,
                "rating": 4.6,
                "description": "아시아 베스트 바 선정. 맥주처럼 탭에서 바로 따라 마시는 칵테일 바. 힙하고 캐주얼한 분위기.",
                "tags": ["추가데이터", "칵테일", "나이트라이프", "힙플레이스"]
            },
            {
                "id": "new_bt_05",
                "name_kr": "만객옥 라멘 (만라이)",
                "name_en": "Man Lai Ramen",
                "name_cn": "滿來溫泉拉麵",
                "category": "Casual Dining",
                "district": "Beitou District",
                "sub_area": "Xinbeitou Station",
                "price_level": 2,
                "rating": 3.8,
                "description": "베이터우 온천 거리 초입의 유명 라멘집. 온천 달걀과 차슈 라멘이 인기.",
                "tags": ["추가데이터", "라멘", "관광지맛집", "접근성"]
            },
            {
                "id": "new_bt_06",
                "name_kr": "전통 또우화 (전통지과두화)",
                "name_en": "Traditional Tofu Pudding",
                "name_cn": "傳統之最豆花堂",
                "category": "Cafe/Dessert",
                "district": "Beitou District",
                "sub_area": "Beitou Station",
                "price_level": 1,
                "rating": 4.4,
                "description": "현지인들이 아침 식사나 간식으로 즐기는 부드러운 순두부 디저트(또우화) 맛집.",
                "tags": ["추가데이터", "또우화", "로컬디저트", "가성비"]
            },
            {
                "id": "add_tp_fd_01",
                "name_kr": "무메 (MUME)",
                "name_en": "MUME",
                "name_cn": "MUME",
                "category": "Fine Dining",
                "district": "Da'an District",
                "sub_area": "Xinyi Anhe",
                "price_level": 4,
                "rating": 4.5,
                "review_count": "1400+",
                "description": "[미슐랭 1스타] 대만 식재료를 북유럽 스타일로 재해석한 모던 파인다이닝. 아시아 50 베스트 레스토랑 단골.",
                "tags": ["미슐랭", "파인다이닝", "기념일"]
            },
            {
                "id": "add_tp_fd_02",
                "name_kr": "르 팔레 (이궁)",
                "name_en": "Le Palais",
                "name_cn": "頤宮",
                "category": "Fine Dining",
                "district": "Datong District",
                "sub_area": "Taipei Main Station",
                "price_level": 4,
                "rating": 4.6,
                "review_count": "2000+",
                "description": "[미슐랭 3스타] 대만 유일의 3스타 중식당. 사전 예약 필수인 광동식 오리구이가 시그니처.",
                "tags": ["미슐랭3스타", "광동요리", "호텔다이닝"]
            },
            {
                "id": "add_tp_fd_03",
                "name_kr": "산해루",
                "name_en": "Mountain and Sea House",
                "name_cn": "山海樓",
                "category": "Fine Dining",
                "district": "Zhongzheng District",
                "sub_area": "Zhongxiao Xinsheng",
                "price_level": 4,
                "rating": 4.5,
                "review_count": "3000+",
                "description": "[미슐랭 1스타] 1930년대 대만 부호의 연회 음식을 재현. 유기농 식재료와 고풍스러운 인테리어.",
                "tags": ["미슐랭", "전통대만요리", "부모님동반"]
            },
            {
                "id": "add_tp_fd_04",
                "name_kr": "스미스 앤 월렌스키",
                "name_en": "Smith & Wollensky Taipei",
                "name_cn": "史密斯華倫斯基牛排館",
                "category": "Fine Dining",
                "district": "Xinyi District",
                "sub_area": "Breeze Nanshan",
                "price_level": 4,
                "rating": 4.5,
                "review_count": "6000+",
                "description": "악마는 프라다를 입는다에 나온 그 스테이크 하우스. 타이베이 101이 정면으로 보이는 최고의 뷰.",
                "tags": ["스테이크", "야경맛집", "데이트"]
            },
            {
                "id": "add_tp_fd_05",
                "name_kr": "더 우카이 타이베이",
                "name_en": "The Ukai Taipei",
                "name_cn": "The Ukai Taipei",
                "category": "Fine Dining",
                "district": "Xinyi District",
                "sub_area": "Breeze Nanshan",
                "price_level": 4,
                "rating": 4.6,
                "review_count": "1000+",
                "description": "일본의 전설적인 데판야키(철판요리) 전문점. 고층 뷰와 극진한 접객 서비스.",
                "tags": ["철판요리", "뷰맛집", "럭셔리"]
            },
            {
                "id": "add_tp_fd_06",
                "name_kr": "로빈스 그릴 (리젠트 호텔)",
                "name_en": "Robin's Grill",
                "name_cn": "Robin's 牛排屋",
                "category": "Fine Dining",
                "district": "Zhongshan District",
                "sub_area": "Zhongshan Station",
                "price_level": 4,
                "rating": 4.5,
                "review_count": "3500+",
                "description": "타이베이 3대 스테이크 중 하나. 샐러드바의 퀄리티가 압도적으로 훌륭함.",
                "tags": ["스테이크", "호텔뷔페", "가족모임"]
            },
            {
                "id": "add_tp_fd_07",
                "name_kr": "신예 식예헌 (타이베이 101점)",
                "name_en": "Shin Yeh Dining",
                "name_cn": "欣葉食藝軒",
                "category": "Fine Dining",
                "district": "Xinyi District",
                "sub_area": "Taipei 101",
                "price_level": 3,
                "rating": 4.5,
                "review_count": "3000+",
                "description": "타이베이 101 85층에서 즐기는 정통 대만 요리 코스. 창가 자리는 예약 필수.",
                "tags": ["대만요리", "101타워", "스카이뷰"]
            },
            {
                "id": "add_tp_fd_08",
                "name_kr": "A 컷 스테이크",
                "name_en": "A Cut Steakhouse",
                "name_cn": "A Cut 牛排館",
                "category": "Fine Dining",
                "district": "Zhongshan District",
                "sub_area": "Zhongshan Station",
                "price_level": 4,
                "rating": 4.6,
                "review_count": "4500+",
                "description": "[미슐랭 1스타] 앰배서더 호텔 내 위치. 고기 본연의 맛을 가장 잘 살린다는 평을 받는 스테이크 명가.",
                "tags": ["미슐랭", "스테이크", "와인"]
            },
            {
                "id": "add_tp_fd_09",
                "name_kr": "타이루아 (태예)",
                "name_en": "Tairroir",
                "name_cn": "態芮",
                "category": "Fine Dining",
                "district": "Zhongshan District",
                "sub_area": "Dazhi",
                "price_level": 4,
                "rating": 4.6,
                "review_count": "1200+",
                "description": "[미슐랭 3스타] 대만 요리의 영혼(Taiwan)과 프랑스 요리 기법(Terroir)의 완벽한 조화.",
                "tags": ["미슐랭3스타", "프렌치퓨전", "예약전쟁"]
            },
            {
                "id": "add_tp_fd_10",
                "name_kr": "옌 (W 호텔)",
                "name_en": "Yen Chinese Restaurant",
                "name_cn": "紫艷中餐廳",
                "category": "Fine Dining",
                "district": "Xinyi District",
                "sub_area": "Taipei City Hall",
                "price_level": 4,
                "rating": 4.5,
                "review_count": "4000+",
                "description": "W 호텔 31층의 힙하고 세련된 광동식 레스토랑. 베이징 덕과 딤섬 런치 코스가 유명.",
                "tags": ["호텔중식", "모던차이니즈", "분위기"]
            },
            {
                "id": "add_tp_cd_01",
                "name_kr": "피카피카 카페",
                "name_en": "Fika Fika Cafe",
                "name_cn": "Fika Fika Cafe",
                "category": "Cafe/Dessert",
                "district": "Zhongshan District",
                "sub_area": "Songjiang Nanjing",
                "price_level": 2,
                "rating": 4.5,
                "review_count": "4000+",
                "description": "북유럽 로스팅 대회 챔피언의 카페. 산미 있는 라이트 로스팅 커피의 진수.",
                "tags": ["스페셜티커피", "챔피언", "라떼맛집"]
            },
            {
                "id": "add_tp_cd_02",
                "name_kr": "멜란지 카페",
                "name_en": "Melange Cafe",
                "name_cn": "米朗琪咖啡館",
                "category": "Cafe/Dessert",
                "district": "Zhongshan District",
                "sub_area": "Zhongshan Station",
                "price_level": 2,
                "rating": 4.5,
                "review_count": "8000+",
                "description": "타이베이 와플 열풍의 주역. 딸기 와플과 아이스 드립 커피가 유명한 줄 서는 카페.",
                "tags": ["와플", "브런치", "웨이팅"]
            },
            {
                "id": "add_tp_cd_03",
                "name_kr": "동취 펀위엔 (동구분원)",
                "name_en": "Eastern Ice Store",
                "name_cn": "東區粉圓",
                "category": "Cafe/Dessert",
                "district": "Da'an District",
                "sub_area": "Zhongxiao Dunhua",
                "price_level": 1,
                "rating": 4.5,
                "review_count": "10000+",
                "description": "현지인들의 소울 푸드. 쫄깃한 타피오카 펄과 각종 토핑을 얹어 먹는 대만식 빙수.",
                "tags": ["로컬디저트", "가성비", "타피오카"]
            },
            {
                "id": "add_tp_cd_04",
                "name_kr": "쌍연 원자탕 (솽리엔 위안자이탕)",
                "name_en": "Shuanglian O-A",
                "name_cn": "雙連圓仔湯",
                "category": "Cafe/Dessert",
                "district": "Datong District",
                "sub_area": "Shuanglian Station",
                "price_level": 1,
                "rating": 4.5,
                "review_count": "4500+",
                "description": "70년 전통의 떡(모찌) 전문점. 기름에 살짝 익힌 떡인 '소마수'가 별미.",
                "tags": ["전통디저트", "모찌", "노포"]
            },
            {
                "id": "add_tp_cd_05",
                "name_kr": "아이스 몬스터 (송고점)",
                "name_en": "Ice Monster",
                "name_cn": "Ice Monster",
                "category": "Cafe/Dessert",
                "district": "Xinyi District",
                "sub_area": "Taipei City Hall",
                "price_level": 2,
                "rating": 4.5,
                "review_count": "3000+",
                "description": "CNN이 선정한 세계 10대 디저트. 원조 망고 빙수의 진한 맛.",
                "tags": ["망고빙수", "필수코스", "CNN선정"]
            },
            {
                "id": "add_tp_cd_06",
                "name_kr": "커피 러버 스 플래닛",
                "name_en": "Coffee Lover's Planet",
                "name_cn": "Coffee Lover's Planet",
                "category": "Cafe/Dessert",
                "district": "Da'an District",
                "sub_area": "SOGO Dunhua",
                "price_level": 2,
                "rating": 4.6,
                "review_count": "1500+",
                "description": "일본 UCC 커피의 플래그십 스토어. 다양한 추출 방식과 원두를 선택 가능.",
                "tags": ["커피전문점", "백화점카페", "휴식"]
            },
            {
                "id": "add_tp_cd_07",
                "name_kr": "키오스크",
                "name_en": "KiOSK",
                "name_cn": "KiOSK",
                "category": "Cafe/Dessert",
                "district": "Zhongshan District",
                "sub_area": "Zhongxiao Xinsheng",
                "price_level": 2,
                "rating": 4.6,
                "review_count": "1800+",
                "description": "미니멀한 인테리어와 수준급 플랫화이트. 레몬 올리브 오일 치즈케이크가 유명.",
                "tags": ["힙한카페", "케이크맛집", "노트북금지"]
            },
            {
                "id": "add_tp_cd_08",
                "name_kr": "울루물루",
                "name_en": "Woolloomooloo",
                "name_cn": "Woolloomooloo",
                "category": "Cafe/Dessert",
                "district": "Xinyi District",
                "sub_area": "Xinyi Anhe",
                "price_level": 2,
                "rating": 4.5,
                "review_count": "4500+",
                "description": "호주 스타일의 올데이 브런치 카페. 커피뿐만 아니라 음식과 맥주 라인업도 훌륭.",
                "tags": ["호주식커피", "브런치", "심야카페"]
            },
            {
                "id": "add_tp_cd_09",
                "name_kr": "북문 봉리빙 (파인애플 빙수)",
                "name_en": "Bei Men Feng Li Bing",
                "name_cn": "北門鳳梨冰",
                "category": "Cafe/Dessert",
                "district": "Da'an District",
                "sub_area": "Dongmen",
                "price_level": 1,
                "rating": 4.7,
                "review_count": "1500+",
                "description": "첨가물 없이 오직 파인애플로만 맛을 낸 옛날식 파인애플 빙수. 갈증 해소에 최고.",
                "tags": ["로컬맛집", "가성비", "파인애플"]
            },
            {
                "id": "add_tp_cd_10",
                "name_kr": "츠비 커피",
                "name_en": "Tzubi Coffee",
                "name_cn": "Tzubi Coffee",
                "category": "Cafe/Dessert",
                "district": "Da'an District",
                "sub_area": "Zhongxiao Dunhua",
                "price_level": 2,
                "rating": 4.7,
                "review_count": "1200+",
                "description": "귀여운 호랑이 로고가 특징인 힙플레이스. 산뜻한 과일향 커피와 무화과 케이크 추천.",
                "tags": ["인스타감성", "디저트", "스페셜티"]
            },
            {
                "id": "add_tp_pb_01",
                "name_kr": "인덜지 비스트로",
                "name_en": "Indulge Experimental Bistro",
                "name_cn": "Indulge Experimental Bistro",
                "category": "Pub/Bar",
                "district": "Da'an District",
                "sub_area": "Zhongxiao Fuxing",
                "price_level": 3,
                "rating": 4.6,
                "review_count": "3500+",
                "description": "[Asia's 50 Best Bars] 대만의 차(Tea)를 활용한 독창적인 칵테일. 세계적으로 인정받는 바.",
                "tags": ["월드클래스", "칵테일", "티칵테일"]
            },
            {
                "id": "add_tp_pb_02",
                "name_kr": "바 무드",
                "name_en": "Bar Mood Taipei",
                "name_cn": "Bar Mood Taipei",
                "category": "Pub/Bar",
                "district": "Da'an District",
                "sub_area": "Zhongxiao Dunhua",
                "price_level": 3,
                "rating": 4.6,
                "review_count": "2500+",
                "description": "[Asia's 50 Best Bars] 식물과 꽃을 활용한 인테리어와 칵테일. 분위기가 매우 고급스러움.",
                "tags": ["데이트", "분위기깡패", "위스키"]
            },
            {
                "id": "add_tp_pb_03",
                "name_kr": "아하 살룬",
                "name_en": "Aha Saloon",
                "name_cn": "Aha Saloon",
                "category": "Pub/Bar",
                "district": "Da'an District",
                "sub_area": "Technology Building",
                "price_level": 3,
                "rating": 4.6,
                "review_count": "1500+",
                "description": "[Asia's 50 Best Bars] '마시면 아하! 하는 곳'. 오래된 카세트 테이프가 있는 레트로 록 분위기.",
                "tags": ["힙스터", "음악좋은곳", "전문적"]
            },
            {
                "id": "add_tp_pb_04",
                "name_kr": "프랭크 타이베이",
                "name_en": "Frank Taipei",
                "name_cn": "Frank Taipei",
                "category": "Pub/Bar",
                "district": "Xinyi District",
                "sub_area": "ATT 4 Fun",
                "price_level": 3,
                "rating": 4.5,
                "review_count": "2500+",
                "description": "ATT 4 Fun 루프탑 바. 타이베이 101을 바로 코앞에서 볼 수 있는 최고의 야경 명소.",
                "tags": ["루프탑", "야경", "파티"]
            },
            {
                "id": "add_tp_pb_05",
                "name_kr": "마르코 폴로 라운지",
                "name_en": "Marco Polo Lounge",
                "name_cn": "馬可波羅酒廊",
                "category": "Pub/Bar",
                "district": "Da'an District",
                "sub_area": "Liuzhangli",
                "price_level": 4,
                "rating": 4.5,
                "review_count": "2000+",
                "description": "샹그릴라 호텔 38층. 파노라마 통유리창으로 내려다보는 타이베이 시내 전경이 압권.",
                "tags": ["호텔라운지", "뷰맛집", "프로포즈"]
            },
            {
                "id": "add_tp_pb_06",
                "name_kr": "포플레이 퀴진",
                "name_en": "Fourplay Cuisine",
                "name_cn": "Fourplay Cuisine",
                "category": "Pub/Bar",
                "district": "Da'an District",
                "sub_area": "Daan Station",
                "price_level": 3,
                "rating": 4.6,
                "review_count": "3500+",
                "description": "타이베이 칵테일 씬의 터줏대감. 메뉴판 없이 취향대로 만들어주는 커스텀 칵테일이 유명.",
                "tags": ["커스텀칵테일", "활기찬", "창의적"]
            },
            {
                "id": "add_tp_pb_07",
                "name_kr": "KOR 타이베이",
                "name_en": "KOR Taipei",
                "name_cn": "KOR Taipei",
                "category": "Pub/Bar",
                "district": "Da'an District",
                "sub_area": "Zhongxiao Dunhua",
                "price_level": 3,
                "rating": 4.5,
                "review_count": "1500+",
                "description": "아시아 최초로 iF 디자인 어워드를 수상한 럭셔리 라운지 바. 힙합과 R&B 음악 베이스.",
                "tags": ["라운지바", "럭셔리", "클럽분위기"]
            },
            {
                "id": "add_tp_pb_08",
                "name_kr": "온스 타이베이",
                "name_en": "Ounce Taipei",
                "name_cn": "Ounce Taipei",
                "category": "Pub/Bar",
                "district": "Da'an District",
                "sub_area": "Xinyi Anhe",
                "price_level": 3,
                "rating": 4.6,
                "review_count": "1200+",
                "description": "숨겨진 문을 찾아 들어가는 스피크이지 바. 정통 뉴욕 스타일의 클래식 칵테일.",
                "tags": ["스피크이지", "비밀공간", "클래식"]
            },
            {
                "id": "add_tp_pb_09",
                "name_kr": "알케미",
                "name_en": "Alchemy Bar",
                "name_cn": "Alchemy Bar",
                "category": "Pub/Bar",
                "district": "Xinyi District",
                "sub_area": "Taipei 101",
                "price_level": 3,
                "rating": 4.6,
                "review_count": "1000+",
                "description": "[Asia's 50 Best Bars] 금주법 시대를 재현한 어둡고 재즈가 흐르는 바. 101 타워 바로 앞.",
                "tags": ["재즈", "분위기", "위스키"]
            },
            {
                "id": "add_tp_pb_10",
                "name_kr": "추오인스 랜드마크 (타이후 브루잉)",
                "name_en": "Taihu Brewing Landmark",
                "name_cn": "啜飲室 Landmark",
                "category": "Pub/Bar",
                "district": "Xinyi District",
                "sub_area": "Taipei City Hall",
                "price_level": 2,
                "rating": 4.6,
                "review_count": "2500+",
                "description": "대만 대표 크래프트 맥주 '타이후'의 탭룸. 서서 마시는 자유로운 분위기의 야외 펍.",
                "tags": ["수제맥주", "스탠딩바", "자유분방"]
            },
            {
                "id": "add_bt_fd_01",
                "name_kr": "옹취정 (그랜드 뷰 리조트)",
                "name_en": "C'est Bon",
                "name_cn": "雍翠庭",
                "category": "Fine Dining",
                "district": "Beitou District",
                "sub_area": "Beitou Hills",
                "price_level": 4,
                "rating": 4.5,
                "review_count": "1000+",
                "description": "베이터우 5성급 리조트의 중식당. 산속 뷰를 보며 즐기는 고급 코스 요리.",
                "tags": ["호텔다이닝", "경치", "힐링"]
            }
        ];

        // ==========================================
        // 2. STATE & CONFIG
        // ==========================================
        const state = {
            district: 'Taipei', // 'Taipei' or 'Beitou'
            category: 'All',
            search: ''
        };

        const CATEGORIES = ["All", "Breakfast", "Street Food", "Casual Dining", "Fine Dining", "Cafe/Dessert", "Pub/Bar"];
        
        // ==========================================
        // 3. CORE FUNCTIONS
        // ==========================================

        function init() {
            renderCategories();
            renderApp();
            
            // Event Listener for Search
            const searchInput = document.getElementById('searchInput');
            if(searchInput) {
                searchInput.addEventListener('input', (e) => {
                    state.search = e.target.value.toLowerCase();
                    renderApp();
                });
            }
        }

        // --- Data Filtering Logic ---
        function getFilteredData() {
            return restaurantData.filter(item => {
                // 1. District Filter
                const isBeitou = item.district === "Beitou District";
                if (state.district === 'Taipei' && isBeitou) return false;
                if (state.district === 'Beitou' && !isBeitou) return false;

                // 2. Category Filter
                if (state.category !== 'All' && item.category !== state.category) return false;

                // 3. Search Filter
                if (state.search) {
                    const searchPool = [
                        item.name_kr, 
                        item.name_en, 
                        item.name_cn, 
                        ...(item.tags || [])
                    ].join(' ').toLowerCase();
                    if (!searchPool.includes(state.search)) return false;
                }

                return true;
            });
        }

        // --- Render Main Grid ---
        function renderApp() {
            const grid = document.getElementById('restaurantGrid');
            const filteredData = getFilteredData();
            const resultCount = document.getElementById('resultCount');
            const emptyState = document.getElementById('emptyState');

            // Update Counter
            if(resultCount) resultCount.textContent = `총 ${filteredData.length}개의 맛집 발견`;

            // Clear Grid
            if(grid) {
                grid.innerHTML = '';

                if (filteredData.length === 0) {
                    grid.classList.add('hidden');
                    if(emptyState) {
                        emptyState.classList.remove('hidden');
                        emptyState.classList.add('flex');
                    }
                } else {
                    if(emptyState) {
                        emptyState.classList.add('hidden');
                        emptyState.classList.remove('flex');
                    }
                    grid.classList.remove('hidden');

                    // Generate Cards
                    filteredData.forEach(item => {
                        const cardHTML = createCard(item);
                        grid.insertAdjacentHTML('beforeend', cardHTML);
                    });
                }
            }
            
            // Update Tab Styles
            updateTabStyles();
        }

        // --- Create Single Card HTML ---
        function createCard(item) {
            const price = '$'.repeat(item.price_level);
            // Default to empty array if tags are missing to prevent error
            const tags = item.tags || [];
            const tagsHTML = tags.map(tag => 
                `<span class="inline-block bg-slate-100 text-slate-600 rounded-full px-2 py-0.5 text-xs font-medium mr-1 mb-1">#${tag}</span>`
            ).join('');
            
            // Generate Google Maps URL if missing (fallback)
            const mapUrl = item.maps_url || `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(item.name_kr + " " + item.sub_area + " Taipei")}`;

            return `
                <div class="bg-white rounded-xl shadow-md hover:shadow-lg transition-shadow duration-300 overflow-hidden flex flex-col h-full border border-slate-100">
                    <div class="p-5 flex-grow">
                        <div class="flex justify-between items-start mb-2">
                            <span class="text-xs font-bold text-orange-600 bg-orange-50 px-2 py-1 rounded-md uppercase tracking-wider">
                                ${item.category}
                            </span>
                            <span class="flex items-center text-slate-700 font-bold text-sm">
                                <i class="fa-solid fa-star text-yellow-400 mr-1"></i> ${item.rating}
                            </span>
                        </div>
                        
                        <h3 class="text-lg font-bold text-slate-900 leading-tight mb-1">${item.name_kr}</h3>
                        <p class="text-xs text-slate-400 font-medium mb-3">${item.name_en} / ${item.name_cn}</p>
                        
                        <div class="flex items-center text-xs text-slate-500 mb-3 space-x-3">
                            <span class="font-semibold text-green-600">${price}</span>
                            <span>|</span>
                            <span><i class="fa-solid fa-location-dot mr-1"></i>${item.sub_area}</span>
                        </div>

                        <p class="text-sm text-slate-600 leading-relaxed mb-4 line-clamp-2">
                            ${item.description.replace(/\[.*?\]\s*/, '')} 
                        </p>

                        <div class="flex flex-wrap">
                            ${tagsHTML}
                        </div>
                    </div>
                    
                    <a href="${mapUrl}" target="_blank" 
                       class="w-full bg-slate-800 hover:bg-slate-900 text-white font-bold py-3 text-sm flex items-center justify-center transition-colors">
                        <i class="fa-solid fa-map-location-dot mr-2"></i> Google Map
                    </a>
                </div>
            `;
        }

        // --- Helpers ---
        function setDistrict(districtName) {
            state.district = districtName;
            renderApp();
        }

        function setCategory(catName) {
            state.category = catName;
            renderCategories(); 
            renderApp();
        }

        function updateTabStyles() {
            const tBtn = document.getElementById('tab-taipei');
            const bBtn = document.getElementById('tab-beitou');
            
            if(!tBtn || !bBtn) return;

            const activeClass = "bg-white text-orange-600 shadow-sm";
            const inactiveClass = "text-slate-500 hover:bg-slate-200";

            // Reset classes roughly (tailwind specific logic simplified)
            tBtn.className = `flex-1 py-2.5 text-sm font-bold rounded-lg transition-all duration-300`;
            bBtn.className = `flex-1 py-2.5 text-sm font-bold rounded-lg transition-all duration-300`;

            if (state.district === 'Taipei') {
                tBtn.className += ` ${activeClass}`;
                bBtn.className += ` ${inactiveClass}`;
            } else {
                bBtn.className += ` ${activeClass}`;
                tBtn.className += ` ${inactiveClass}`;
            }
        }

        function renderCategories() {
            const listContainer = document.getElementById('categoryList');
            if(!listContainer) return;
            
            listContainer.innerHTML = CATEGORIES.map(cat => {
                const isActive = state.category === cat;
                const baseStyle = "flex-shrink-0 px-4 py-2 rounded-full text-sm font-medium border transition-colors cursor-pointer select-none";
                const activeStyle = "bg-orange-500 text-white border-orange-500";
                const inactiveStyle = "bg-white text-slate-600 border-slate-200 hover:border-orange-300 hover:text-orange-500";
                
                return `<div onclick="setCategory('${cat}')" class="${baseStyle} ${isActive ? activeStyle : inactiveStyle}">
                            ${cat}
                        </div>`;
            }).join('');
        }

        // Start
        window.onload = init;

    </script>
</body>
</html>
